swagger: "2.0"
info:
  description: "API de um banco digital"
  version: "1.0.0"
  title: "Banco Digital"
  contact: {
    name: "Suporte",
    email: "kariinagomes_@hotmail.com"
  }
host: "bancodigital"
basePath: "/v1"
tags:
  - name: "conta"
    description: "Cadastro e informações sobre a conta"
  - name: "favorecido"
    description: "Cadastro e informações sobre favorecidos"
  - name: "transferência"
    description: "Consultar e realizar transferências"
consumes: 
  - "application/json"
produces: 
  - "application/json"

paths:
  /conta:
    post:
      tags: 
        - "conta"
      summary: "Inclui uma nova conta corrente"
      parameters:
        - in: "body"
          name: "conta"
          description: "informações da nova conta"
          required: true
          schema:
            $ref: "#/definitions/Conta"
      responses:
        201: 
          description: "Conta cadastrada com sucesso"
        400:
          description: "Entrada inválida"
  /conta/{agencia}/{conta}/saldo:
    get:
      tags: 
        - "conta"
      summary: "Consulta o saldo da conta do usuário"
      parameters: 
        - in: "path"
          name: "agencia" 
          description: "número da agência do usuário"
          required: true
          type: "integer"
          format: "int32"
        - in: "path"
          name: "conta"
          description: "número da conta do usuário"
          required: true
          type: "integer"
          format: "int32"
      responses:
        200: 
          description: "Consulta realizada"
          schema:
            $ref: "#/definitions/Conta"
        401:
          description: "Usuário não tem permissão para acessar o saldo dessa conta"
  /conta/{agencia}/{conta}/extrato:
    get:
      tags:
        - "conta"
      summary: "Consulta o extrato da conta do usuário"
      parameters: 
        - in: "path"
          name: "agencia"
          description: "número da agência do usuário"
          required: true
          type: "integer"
          format: "int32"
        - in: "path"
          name: "conta"
          description: "número da conta do usuário"
          required: true
          type: "integer"
          format: "int32"
      responses:
        200: 
          description: "Consulta realizada"
          # schema: 
           #  $ref: "#/definitions/Transacao"
        401:
          description: "Usuário não tem permissão para acessar o extrato dessa conta"
  /favorecido:
    post:
      tags:
        - "favorecido"
      summary: "Cria um novo favorecido"
      parameters:
        - in: "body" 
          name: "favorecido"
          description: "informações do novo favorecido"
          required: true
          schema:
            $ref: "#/definitions/Favorecido"
      responses:
        201: 
          description: "Favorecido cadastrado com sucesso"
        400:
          description: "Entrada inválida"
    put:
      tags: 
        - "favorecido"
      summary: "Edita o favorecido"
      parameters:
        - in: "body"
          name: "favorecido"
          description: "informações "
          required: true
          schema:
            $ref: "#/definitions/Favorecido"
      responses:
        200:
          description: "Favorecido atualizado!"
        400:
          description: "Entrada inválida"
        401:
          description: "Usuário não tem permissão para atualizar o favorecido"
  /favorecido/{id}:
    delete:
      tags: 
        - "favorecido"
      summary: "Remove o favorecido"
      parameters:
        - in: "path"
          name: "id"
          description: "id do favorecido a ser removido"
          required: true
          type: "integer"
          format: "int32"
      responses:
        204: 
          description: "Favorecido removido com sucesso"
        400:
          description: "O favorecido informado não é válido"
        404:
          description: "Favorecido não encontrado"
  /transferencia:
    post:
      tags: 
        - "transferência"
      summary: "Realiza transferência bancária"
      parameters: {}
      responses: 
        201: 
          description: "Transferência realizada"
        400:
          description: "Entrada inválida"
    get:
      tags:
        - "transferência"
      summary: "Lista as transferências bancárias"
      parameters: {}
      responses:
        200:
          description: "Consulta realizada"
        401:
          description: "Usuário não tem permissão para acessar"
          
definitions:
  Conta:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "int32"
      senha:
        type: "string"
        format: "password"
        example: "123A"
      saldo:
        type: "number"
        format: "float"
      pessoa:
        type: "object"
        $ref: "#/definitions/Pessoa"
  Favorecido:
    type: "object"
    properties:
      id: 
        type: "integer"
        format: "int32"
      instituicao:
        type: "string"
      tipoConta:
        type: "string"
        enum:
          - "Conta corrente"
          - "Conta poupança"
        example: "Conta corrente"
      pessoa:
        type: "object"
        $ref: "#/definitions/Pessoa"
  Pessoa:
    type: "object"
    properties:
      id: 
        type: "integer"
        format: "int32"
      nome: 
        type: "string"
        example: "Karina Gomes"
      cpf: 
        type: "string"
        example: 12345678912
      agencia: 
        type: "integer"
        format: "int32"
      numeroConta: 
        type: "integer"
        format: "int32"
        